# SBOMTrend

SBOMTrend analyses a directory of SBOM (Software Bill of Materials) in either
[SPDX](https://www.spdx.org) and [CycloneDX](https://www.cyclonedx.org) formats.
It analyses all SBOM files within a directory and identifies license and version changes, for each file.

It is intended to be used as part of a continuous integration system to enable accurate records of SBOMs to be maintained, typically through the
build development phase, and also to support subsequent audit needs to determine if a particular component has been used.

## Installation

To install use the following command:

`pip install sbomtrend`

Alternatively, just clone the repo and install dependencies using the following command:

`pip install -U -r requirements.txt`

The tool requires Python 3 (3.8+). It is recommended to use a virtual python environment especially
if you are using different versions of python. `virtualenv` is a tool for setting up virtual python environments which
allows you to have all the dependencies for the tool set up in a single environment, or have different environments set
up for testing using different versions of Python.


## Usage

```
usage: sbomtrend [-h] [-d DIRECTORY] [-m MODULE] [--exclude-license] [--debug] [-o OUTPUT_FILE] [-V]

SBOMTrend analyses a set of Software Bill of Materials within a directory and detects the changes in the components.

options:
  -h, --help            show this help message and exit
  -V, --version         show program's version number and exit

Input:
  -d DIRECTORY, --directory DIRECTORY
                        Directory to be scanned
  -m MODULE, --module MODULE
                        identity of component
  --exclude-license     suppress detecting the license of components

Output:
  --debug               add debug information
  -o OUTPUT_FILE, --output-file OUTPUT_FILE
                        output filename (default: output to stdout)
```
					
## Operation

The `--directory` option is used to identify the directory to be scanned. If this option is not specified, the current directory is assumed.

The `--module` option can be used to restrict the reporting to a specific component. The default is to report for all components.

The tool reports the versions and licenses for each component in each SBOM. License reporting can be suppressed using the `--exclude-license` option.

The `--output-file` option is used to control the destination of the output generated by the tool. The
default is to report to the console but can be stored in a file (specified using `--output-file` option).

**Example**

The following command will report the changes

```bash
# sbomtrend -d <directory> --module rich
```

Produces the following output (output is clearly dependent on the contents if the SBOMs!)

```bash
Name rich
Count 46
Versions 16
Version {'13.0.0': 1, '13.0.1': 1, '13.1.0': 1, '13.2.0': 1, '13.3.1': 5, '13.3.2': 4, '13.3.3': 2, '13.3.4': 2, '13.3.5': 4, '13.4.1': 1, '13.4.2': 5, '13.5.0': 1, '13.5.2': 4, '13.5.3': 2, '13.6.0': 7, '13.7.0': 5}
Licenses 1
License {'MIT': 46}
```

The following command will report the version changes and store the result in a JSON file.

```bash
# sbomtrend -d <directory> --module rich -o <output file> --exclude-license
```

The resulting file will be

```json
{
  "rich": {
    "name": "rich",
    "count": 46,
    "version": {
      "13.3.4": 2,
      "13.0.0": 1,
      "13.5.2": 4,
      "13.4.1": 1,
      "13.7.0": 5,
      "13.3.5": 4,
      "13.3.1": 5,
      "13.5.0": 1,
      "13.6.0": 7,
      "13.4.2": 5,
      "13.1.0": 1,
      "13.3.3": 2,
      "13.3.2": 4,
      "13.5.3": 2,
      "13.0.1": 1,
      "13.2.0": 1
    }
  }
}
```

## Licence

Licenced under the Apache 2.0 Licence.

## Limitations

This tool is meant to support software development and security audit functions. The usefulness of the tool is dependent on the SBOM data
which is provided to the tool. Unfortunately, the tool is unable to determine the validity or completeness of such a SBOM file; users of the tool
are therefore reminded that they should assert the quality of any data which is provided to the tool.

When processing and validating licenses, the application will use a set of synonyms to attempt to map some license identifiers to the correct [SPDX License Identifiers](https://spdx.org/licenses/). However, the
user of the tool is reminded that they should assert the quality of any data which is provided by the tool particularly where the license identifier has been modified.

## Feedback and Contributions

Bugs and feature requests can be made via GitHub Issues.